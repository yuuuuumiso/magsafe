

<footer class="l-footer"></footer>



<script>


//cssキャッシュ
const cssFiles = [
  './css/style.css',
  './css/iframe.css',
];
const date_css = '?' + new Date().getTime();
for (var i = 0; i < cssFiles.length; i++){
  let css_el = document.createElement("link");
  css_el.rel = "stylesheet";
  css_el.type = "text/css";
  css_el.href = cssFiles[i] + date_css;
  document.head.appendChild(css_el);
}

//jsキャッシュ
const jsFiles = [
    './js/init.js',
    ];
    const date_js = '?' + new Date().getTime();
    for (var i = 0; i < jsFiles.length; i++){
    let js_el = document.createElement("script");
    js_el.type = "text/javascript";
    js_el.src = jsFiles[i] + date_js;
    document.body.appendChild(js_el);
    }

    //imgタグキャッシュ
window.addEventListener('DOMContentLoaded', function () {//HTML ドキュメントが完全に読み込まれ、解析されたときに発生
  let file_tmp;
  const date_param = new Date().getTime();//日時
  const imgs = document.querySelectorAll("img");//ページ内のすべての img タグを取得
  for(let i=0; i<imgs.length; i++) {//取得した画像要素に対してループ
    if (imgs[i].getAttribute("data-src") !== null) {//data-src 属性が存在する場合のみ、後続の処理
      if (imgs[i].getAttribute("data-src").indexOf('?') === -1) {//data-src 属性の値にクエリパラメータが含まれているかを確認
        file_tmp = "?"+date_param;//含まれれていない場合
      }else{
        file_tmp = "&"+date_param;//含まれている場合
      }
      imgs[i].src = imgs[i].getAttribute("data-src")+file_tmp;//画像のソース（src 属性）を、元々の data-src 属性に取得したクエリパラメータを追加して更新します。
    }
  }
});

</script>
</body>
</html>
